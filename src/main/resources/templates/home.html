<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/common.css" rel="stylesheet">
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=0jcn2x4ikv"></script>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=0jcn2x4ikv&submodules=geocoder"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="/common.js"></script>
</head>

<body>
<div id="title">
    <span class="title-decoration">또</span>
    <span class="title-decoration">간</span>
    <span class="title-decoration">집</span>
    맛집 리스트</div>
<div id="container">
    <div id="map"></div>
    <div id="side">
        <input type="text" id="input-addr" placeholder="주소를 입력해주세요.">
        <input type="button" id="btn-coordinate" value="좌표 얻기">
        <div id="div-addr-console"></div>
    </div>
</div>

<script>
    var mapOptions = { center: new naver.maps.LatLng(37.3595704, 127.105399), zoom: 10 };
    var map = new naver.maps.Map('map', mapOptions);

    document.addEventListener('click', (e) => {
        if(e.target.id == 'btn-coordinate') {
            const addr = document.getElementById('input-addr').value;

            if(!addr) {
                alert('주소를 입력해주세요.');
            } else {
                $.ajax({
                    type: 'get',
                    url: '/naver/map',
                    data: {'addr': encodeURIComponent(addr)},
                    dataType: 'json',
                    timeout: 10000,
                    cache: false,
                    success: (result) => {
                        console.log('result = ', result);
                    },
                    error: (x, e) => {
                        console.log(x);
                        console.log(e);
                    }
                })

                // naver.maps.Service.geocode({
                //     query: addr
                // }, function(status, response) {
                //     if(status == naver.maps.Service.Status.OK) {
                //         var result = response.v2; // 검색 결과의 컨테이너
                //         var items = result.address; // 검색 결과의 배열
                //
                //         const divAddrConsole = document.getElementById('div-addr-console');
                //         divAddrConsole.innerHTML = items;
                //     } else {
                //         return alert('somethings wrong!');
                //     }
                // })
            }
        }
    });
</script>
</body>
</html>